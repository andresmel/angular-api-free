import{h as x}from"./chunk-WTTCLMQT.js";import{a as I}from"./chunk-KW537NLM.js";import{a as k}from"./chunk-P2JY2IJ6.js";import"./chunk-5ASQF74S.js";import{a as S,b as p}from"./chunk-DDZTXIWT.js";import{c as v,d as L,g as y,m as b}from"./chunk-7UWXGM64.js";import{$a as u,Ca as c,J as m,Na as f,O as i,Ra as g,_a as a,ab as d,ba as l,bb as h,gb as _}from"./chunk-CBLSIXQX.js";import"./chunk-7CGTOI24.js";var n=class t{_http=i(y);constructor(){}login(o){return this._http.post(p.baseUrl+p.endPoints.users.auth,o)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};var r={username:"",token:""};function N(t,o){t&1&&h(0,"app-loading")}var C=class t{_toast=i(x);_loginService=i(n);_user=k;_route=i(b);pageLoad=l(!1);title="Sing in";login(o){this.pageLoad.set(!this.pageLoad()),r.username=o.username,this._loginService.login(o).subscribe({next:e=>{console.log(e),e?.token&&(r.token=e.token,this._user.setUser(r),sessionStorage.setItem("user",JSON.stringify(r)),this._toast.success("Login successful"),this._route.navigate(["dashboard"])),this.pageLoad.set(!this.pageLoad())},error:e=>{console.log(e),this._toast.error("error de usuario"),this.pageLoad.set(!this.pageLoad())},complete:()=>{this.pageLoad.set(!this.pageLoad())}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"container-form"],[3,"sendata","title"]],template:function(e,s){e&1&&(g(0,N,1,0,"app-loading",0),u(1,"div",1)(2,"app-form",2),_("sendata",function(j){return s.login(j)}),d()()),e&2&&(a("ngIf",s.pageLoad()),c(2),a("title",s.title))},dependencies:[I,S,L,v],styles:[".container-form[_ngcontent-%COMP%]{position:absolute;top:80px;left:0;width:100%;display:flex;justify-content:center;align-items:center;height:calc(100vh - 80px)}"]})};export{C as Login};
